{
    "statusCode": {{source.statusCode}},
    "headers": {
      {%- for header in source.headers -%}
        "{{header.Key}}": "{{header.Value  | replace: "\\", "\\\\" | replace: """, "\\"" }}" {%- unless forloop.last -%},
      {%- endunless -%}
      {%- endfor %}
    },
    "body": {
        "accountId": "{{ source.body.AccountId }}",
        "name": "{{ source.body.Name }}",
        "postalCode": "{{ source.body.PostalCode }}",
        "pricingGroup": "{{ source.body.PricingGroup }}",
        "includeAccount": true,
        "accounts": [
          {%- for Account in source.body.Accounts -%}
            {
                "subAccountId": "{{ Account.SubAccountId }}",
                "name": "{{ Account.Name }}",
                "postalCode": "{{ Account.PostalCode }}"
            } {%- unless forloop.last -%},
              {%- endunless -%}
          {%- endfor %}
        ],
        "success": {% if source.statusCode == 200 -%}true{%- else -%}false{%- endif %},
        "errorCode": {% if source.statusCode == 200 -%}0{%- else -%}{{ source.statusCode }}{%- endif %},
        "errorMessage": {% if source.statusCode != 200 -%}"{{ source.body.ErrorMessage }}"{%- else -%}""{%- endif %}
    }
}
