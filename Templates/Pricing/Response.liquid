{
    "statusCode": {{source.statusCode}},
    "headers": {
      {%- for header in source.headers -%}
        "{{header.Key}}": "{{header.Value  | replace: "\\", "\\\\" | replace: """, "\\"" }}" {%- unless forloop.last -%},
      {%- endunless -%}
      {%- endfor %}
    },
    "body": {
        "vendorCosts": [
          {%- for Item in source.body.Items -%}
            {
                "accountId": "{{ Item.AccountId }}",
                "subAccountId": "{{ Item.SubAccountId }}",
                "itemId": "{{ Item.ItemId }}",
                "costs": [
                    {
                        "cost": {{ Item.Cost }},
                        "quantity": {{ Item.Quantity }}
                    }
                ]
            } {%- unless forloop.last -%},
              {%- endunless -%}
          {%- endfor %}
        ],
        "success": {% if source.statusCode == 200 -%}true{%- else -%}false{%- endif %},
        "errorCode": {% if source.statusCode == 200 -%}0{%- else -%}{{ source.statusCode }}{%- endif %},
        "errorMessage": {% if source.statusCode != 200 -%}"{{ source.body.ErrorMessage }}"{%- else -%}""{%- endif %}
    }
}
