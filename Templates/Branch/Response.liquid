{
    "statusCode": {{source.statusCode}},
    "headers": {
      {%- for header in source.headers -%}
        "{{header.Key}}": "{{header.Value  | replace: "\\", "\\\\" | replace: """, "\\"" }}" {%- unless forloop.last -%},
      {%- endunless -%}
      {%- endfor %}
    },
    "body": {
        "branches": [
          {%- for Branch in source.body.Branches -%}
            {
                "branchId": "{{ Branch.BranchId }}",
                "branchName": "{{ Branch.BranchName }}",
                "pricingGroup": "{{ Branch.PricingGroup }}",
                "phoneNumber": "{{ Branch.PhoneNumber }}",
                "contact": "{{ Branch.Contact }}",
                "address": {
                    "street": "{{ Branch.Street }}",
                    "unit": "{{ Branch.Unit }}",
                    "city": "{{ Branch.City }}",
                    "state": "{{ Branch.State }}",
                    "postalCode": "{{ Branch.PostalCode }}",
                    "country": "{{ Branch.Country }}"
                }
            } {%- unless forloop.last -%},
              {%- endunless -%}
          {%- endfor %}
        ],
        "success": {% if source.statusCode == 200 -%}true{%- else -%}false{%- endif %},
        "errorCode": {% if source.statusCode == 200 -%}0{%- else -%}{{ source.statusCode }}{%- endif %},
        "errorMessage": {% if source.statusCode != 200 -%}"{{ source.body.ErrorMessage }}"{%- else -%}""{%- endif %}
    }
}
